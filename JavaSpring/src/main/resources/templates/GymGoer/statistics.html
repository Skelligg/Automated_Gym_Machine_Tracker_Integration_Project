<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Statistics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <style>
        .btn-group .btn input[type="radio"] {
            display: none;
        }

        .btn-group .btn.active {
            color: black;
        }
    </style>

</head>

<body>

<div class="d-flex justify-content-between align-items-center">
    <h1>Statistics</h1>
    <form action="/GymGoer/statistics" method="post">
        <button type="submit" class="btn d-flex flex-column align-items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293z"/>
            </svg>
            <span class="mt-1">Close</span>
        </button>
    </form>
</div>

<canvas id="statisticsChart" height="60"></canvas>
<script>

    // const totalWeights = stats.map(stat=>stat.totalWeight);
    const kilograms = [50,55,60,65,70,75,80]
    const totalWeights = [64,58,72,52,56,66]


    const ctx = document.getElementById('statisticsChart').getContext('2d');
    new Chart (ctx, {
        type: 'line',
        data: {
            labels: kilograms,
            datasets: [{
                label: 'Total Weight Lifted',
                data: totalWeights,
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                borderColor: 'rgb(0,0,0)',
                borderWidth: 2,
                pointBackgroundColor: 'rgb(0,0,0)',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 5,
                fill: false
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                    align: 'end',
                }
            },
            scales: {
                x:{
                    beginAtZero: false,
                    grid: {
                        display: false
                    }
                },
                y: {
                    beginAtZero: false,
                    grid: {
                        display: false
                    }
                }
            }
        }
    });
</script>



<div class="d-flex justify-content-center mt-3">
    <div class="btn-group btn-group-toggle " data-toggle="buttons">
        <label class="btn btn-light active" onclick="showTable('weightTable',this)">
            <input type="radio" name="options" id="option1" autocomplete="off" checked> By Weight
        </label>
        <label class="btn btn-light" onclick="showTable('volumeTable',this)">
            <input type="radio" name="options" id="option2" autocomplete="off"> By Volume
        </label>
        <label class="btn btn-light" onclick="showTable('repsTable',this)">
            <input type="radio" name="options" id="option3" autocomplete="off"> By Reps
        </label>
    </div>
</div>

<h4 class="text-center">History</h4>

<script>
    function showTable(tableId,clickedLabel) {
        document.querySelectorAll('div[id$="Table"]').forEach(table => {
            table.style.display = 'none';
        });

        // showing the clicked table
        document.getElementById(tableId).style.display = 'block';

        //removing the active class
        document.querySelectorAll('.btn').forEach(button=>{
            button.classList.remove('active')
        })
        //adding the active class
        clickedLabel.classList.add('active')
    }
</script>

<!--TABLE FOR THE WEIGHTS-->
<div id="weightTable">
    <table class="table">
        <thead>
        <tr>
            <th>Name</th>
            <th>Total Weight</th>
            <th>Date</th>

        </tr>
        </thead>
        <tbody>
        <tr>
            <td th:utext="Username"></td>
            <td th:text="25"></td>
            <td th:text="${LocalDate}"></td>

        </tr>
        <!--        <tr th:each="stat : ${statistics}">-->
        <!--            <td th:text="${stat.username}"></td>-->
        <!--            <td th:text="${stat.totalWeight}"></td>-->
        <!--            <td th:text="${LocalDate}"></td>-->
        <!--        </tr>-->
        </tbody>
    </table>
</div>

<!--TABLE FOR THE VOLUME-->
<div id="volumeTable" style="display: none;">
    <table class="table">
        <thead>
        <tr>
            <th>Username</th>
            <th>Total Volume</th>
            <th>Date</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="stat : ${statistics}">
            <td th:text="${stat.username}"></td>
            <td th:text="${volume}"></td>
            <td th:text="${LocalDate}"></td>
        </tr>
        </tbody>
    </table>
</div>

<!--TABLE FOR THE REPS-->
<div id="repsTable" style="display: none;">
    <table class="table">
        <thead>
        <tr>
            <th>Username</th>
            <th>Total Reps</th>
            <th>Date</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="stat : ${statistics}">
            <td th:text="${stat.username}"></td>
            <td th:text="${stat.totalSessions}"></td>
            <td th:text="${LocalDate}"></td>
        </tr>
        </tbody>
    </table>
</div>

</body>
</html>